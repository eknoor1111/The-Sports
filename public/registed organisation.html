<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
     <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <script>
         var mymodule= angular.module("organ",[]);
      
      mymodule.controller("body",function($scope,$http)
      {

        $scope.jsonArray=[];

       $scope.doFetch=function()
       {
        alert();
            var url="/do-fetch-organisation";

            
            $http.get(url).then(allGoodFx,someBadFx);
            function allGoodFx(response)
            {
                //resp in JSON array
               // alert(JSON.stringify(response.data));
                $scope.jsonArray=response.data;
            }

            function someBadFx(response)
            {
                alert("ERROR:"+JSON.stringify(response.data));
            }
       }
       //----------------------
       $scope.doDelete=function(emailid)
       {
            alert(emailid);
            var url="/delete-organisation?inputEmail="+emailid;
            
            $http.get(url).then(allGoodFx,someBadFx);
            function allGoodFx(response)
            {
               alert(response.data);//resp in string
                $scope.doFetchAll();
            }

            function someBadFx(response)
            {
                alert(JSON.stringify(response.data));
            }
       }


       })
      
        
    </script>
</head>
<body ng-app="organ" ng-controller="body" ng-init="doFetch();">
    <form>
  


<table class="table">
  <thead>
    <tr>
      <th scope="col">EMAIL ID</th>
      <th scope="col">ORGNAME</th>
     <th scope="col">REGNUMBER</th>
      <th scope="col">ADDRESS</th>
      <th scope="col">CITY</th>
      <th scope="col">SPORTS</th>
      <th scope="col">WEBSITE</th>
      <th scope="col">INSTA</th>
      <th scope="col">HEAD</th>

      <th scope="col">CONTACT</th>
      <th scope="col">PICURL</th>
      <th scope="col">OTHERINFO</th>
      
      
      
    
 
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="obj in jsonArray">
      
    
      <td>{{obj.emailid}}</td>
      <td>{{obj.orgname}}</td>
      <td>{{obj.regnumber}}</td>
      <td>{{obj.address}}</td>
       <td>{{obj.city}}</td>
      <td> {{obj.sports}}</td>
      <td>{{obj.website}}</td>
      <td>{{obj.insta}}</td>
      <td>{{obj.head}}</td>
      <td>{{obj.contact}}</td>
      <td>{{obj.picurl}}</td>
       <td>{{obj.otherinfo}}</td>
          

            
      
        
        
    </tr>
      
  </tbody>
</table>

</body>
</html>